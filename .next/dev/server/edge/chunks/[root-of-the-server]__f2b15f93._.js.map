{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport type { NextRequest } from \"next/server\";\nimport { createServerClient } from \"@supabase/ssr\";\n\nexport async function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl;\n\n  /* ---------- RULE 1: \"/\" â†’ \"/www/Home\" ---------- */\n  if (pathname === \"/\") {\n    return NextResponse.redirect(new URL(\"/www/Home\", request.url));\n  }\n\n  const response = NextResponse.next();\n\n  const supabase = createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        get(name) {\n          return request.cookies.get(name)?.value;\n        },\n        set(name, value, options) {\n          response.cookies.set({ name, value, ...options });\n        },\n        remove(name, options) {\n          response.cookies.set({ name, value: \"\", ...options });\n        },\n      },\n    }\n  );\n\n  const {\n    data: { session },\n  } = await supabase.auth.getSession();\n\n  /* ---------- RULE 2 + 3: Protect admin routes ---------- */\n  if (pathname.startsWith(\"/admin-site\")) {\n    if (!session) {\n      return NextResponse.redirect(new URL(\"/login\", request.url));\n    }\n  }\n\n  /* ---------- Optional safety: logged-in user shouldn't see login ---------- */\n  if (pathname === \"/login\" && session) {\n    return NextResponse.redirect(new URL(\"/admin-site\", request.url));\n  }\n\n  return response;\n}\n\nexport const config = {\n  matcher: [\"/\", \"/admin-site/:path*\", \"/login\"],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAEA;AAAA;;;AAEO,eAAe,WAAW,OAAoB;IACnD,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,mDAAmD,GACnD,IAAI,aAAa,KAAK;QACpB,OAAO,iWAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,aAAa,QAAQ,GAAG;IAC/D;IAEA,MAAM,WAAW,iWAAY,CAAC,IAAI;IAElC,MAAM,WAAW,IAAA,oTAAkB,EACjC,QAAQ,GAAG,CAAC,wBAAwB,wPAEpC;QACE,SAAS;YACP,KAAI,IAAI;gBACN,OAAO,QAAQ,OAAO,CAAC,GAAG,CAAC,OAAO;YACpC;YACA,KAAI,IAAI,EAAE,KAAK,EAAE,OAAO;gBACtB,SAAS,OAAO,CAAC,GAAG,CAAC;oBAAE;oBAAM;oBAAO,GAAG,OAAO;gBAAC;YACjD;YACA,QAAO,IAAI,EAAE,OAAO;gBAClB,SAAS,OAAO,CAAC,GAAG,CAAC;oBAAE;oBAAM,OAAO;oBAAI,GAAG,OAAO;gBAAC;YACrD;QACF;IACF;IAGF,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EAClB,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;IAElC,0DAA0D,GAC1D,IAAI,SAAS,UAAU,CAAC,gBAAgB;QACtC,IAAI,CAAC,SAAS;YACZ,OAAO,iWAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;QAC5D;IACF;IAEA,6EAA6E,GAC7E,IAAI,aAAa,YAAY,SAAS;QACpC,OAAO,iWAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,eAAe,QAAQ,GAAG;IACjE;IAEA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;QAAK;QAAsB;KAAS;AAChD"}}]
}